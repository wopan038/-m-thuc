<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Food Login</title>

<style>
body{
  margin:0;
  font-family:Arial;
  height:100vh;
  background:url("https://media-cdn-v2.laodong.vn/Storage/NewsPortal/2023/9/29/1247753/Am-Thuc-Viet-Nam.jpeg") center/cover;
}

/* BOX */
.container{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:380px;
  padding:30px;
  background:rgba(20,20,20,0.95);
  border-radius:15px;
  box-shadow:0 0 40px rgba(255,140,0,0.6);
  color:white;
}

/* LOGO */
.logo{
  text-align:center;
  font-size:28px;
  font-weight:bold;
  margin-bottom:15px;
}

.logo::before{
  content:"üçú ";
}

/* INPUT */
input{
  width:100%;
  padding:14px;
  margin:10px 0;
  background:#1f1f1f;
  border:none;
  color:white;
  border-radius:8px;
}

.error{
  font-size:13px;
  color:#ffb3b3;
  min-height:15px;
}

/* BUTTON */
button{
  width:100%;
  padding:14px;
  margin-top:10px;
  background:#ff7a18;
  border:none;
  color:white;
  border-radius:8px;
  cursor:pointer;
  font-weight:bold;
}

button:hover{
  background:#ff5722;
}

.switch{
  text-align:center;
  margin-top:15px;
  cursor:pointer;
  color:#ffc107;
}
</style>
</head>

<body>

<!-- REGISTER -->
<div class="container" id="registerBox">
<div class="logo">Food Vi·ªát Nam</div>
<h2>ƒêƒÉng k√Ω</h2>

<input id="regUser" placeholder="T√™n ƒëƒÉng nh·∫≠p">
<div class="error" id="userErr"></div>

<input id="regPass" type="password" placeholder="M·∫≠t kh·∫©u">
<div class="error" id="passErr"></div>

<input id="regPass2" type="password" placeholder="X√°c nh·∫≠n m·∫≠t kh·∫©u">
<div class="error" id="pass2Err"></div>

<button onclick="register()">ƒêƒÉng k√Ω</button>

<div class="switch" onclick="showLogin()">ƒê√£ c√≥ t√†i kho·∫£n? ƒêƒÉng nh·∫≠p</div>
</div>


<!-- LOGIN -->
<div class="container" id="loginBox" style="display:none">
<div class="logo">Food Vi·ªát Nam</div>
<h2>ƒêƒÉng nh·∫≠p</h2>

<input id="loginUser" placeholder="T√™n ƒëƒÉng nh·∫≠p">
<div class="error" id="loginUserErr"></div>

<input id="loginPass" type="password" placeholder="M·∫≠t kh·∫©u">
<div class="error" id="loginPassErr"></div>

<button onclick="login()">ƒêƒÉng nh·∫≠p</button>

<div class="switch" onclick="showRegister()">Ch∆∞a c√≥ t√†i kho·∫£n? ƒêƒÉng k√Ω</div>
</div>


<script>

/* ===== CHUY·ªÇN FORM ===== */
function showLogin(){
  registerBox.style.display="none";
  loginBox.style.display="block";
}

function showRegister(){
  registerBox.style.display="block";
  loginBox.style.display="none";
}


/* ===== REGISTER ===== */
function register(){

userErr.innerText="";
passErr.innerText="";
pass2Err.innerText="";

let username = regUser.value.trim();
let pass = regPass.value.trim();
let pass2 = regPass2.value.trim();

if(username.length < 3){
  userErr.innerText="T√™n >= 3 k√Ω t·ª±";
  return;
}

if(pass.length < 6){
  passErr.innerText="M·∫≠t kh·∫©u >= 6 k√Ω t·ª±";
  return;
}

if(pass !== pass2){
  pass2Err.innerText="M·∫≠t kh·∫©u kh√¥ng tr√πng";
  return;
}

/* L·∫•y danh s√°ch user */
let users = JSON.parse(localStorage.getItem("users") || "[]");

/* Check tr√πng */
if(users.find(u => u.username === username)){
  userErr.innerText="T√™n ƒë√£ t·ªìn t·∫°i";
  return;
}

/* L∆∞u user */
users.push({username,password:pass});
localStorage.setItem("users", JSON.stringify(users));

/* L∆∞u user ƒëang login */
localStorage.setItem("user", username);

/* CHUY·ªÇN TRANG */
location.href="homefood.html";
}


/* ===== LOGIN ===== */
function login(){

loginPassErr.innerText="";

let username = loginUser.value.trim();
let pass = loginPass.value.trim();

let users = JSON.parse(localStorage.getItem("users") || "[]");

let found = users.find(
  u => u.username === username && u.password === pass
);

if(found){
  localStorage.setItem("user", username);
  location.href="homefood.html";
}
else{
  loginPassErr.innerText="Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u";
}
}


/* ===== AUTO LOGIN ===== */
window.onload = ()=>{
  if(localStorage.getItem("user")){
    location.href="homefood.html";
  }
}

</script>

</body>
</html>
